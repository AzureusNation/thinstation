# Description: Thinstation essential package
# URL: http://www.thinstation.org
# Maintainer: Donald A. Cupp Jr. (don cupp jr at ya hoo dot com)

name=inkscape
version=0.48.4
release=1
source=(http://iweb.dl.sourceforge.net/project/inkscape/inkscape/$version/inkscape-$version.tar.bz2
	inkscape-0.48.4-gc-1.patch
	inkscape-0.48.4-freetype-1.patch)

build() {
	cd $name-$version

	sed -i src/extension/internal/pdfinput/pdf-parser.cpp \
	    -e "/GfxColorSpace::parse/s|NULL|&, NULL|g"       \
	    -e "/lookupPattern/s:NULL:&, NULL:g"              \
	    -e "/lookupShading/s:NULL:&, NULL:g" 

	patch -Np1 -i ../inkscape-0.48.4-gc-1.patch
	patch -Np1 -i ../inkscape-0.48.4-freetype-1.patch

	sed -e "s@commands_toolbox,@commands_toolbox@" -i src/widgets/desktop-widget.h
	./configure --prefix=/usr \
			--sysconfdir=/etc \
			--libexecdir=/lib \
			--mandir=/usr/man \

	make
	make DESTDIR=$PKG install
}
