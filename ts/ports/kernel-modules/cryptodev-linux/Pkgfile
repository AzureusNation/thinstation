# Description: Thinstation essential package
# URL: http://www.thinstation.org
# Maintainer: Donald A. Cupp Jr. (don cupp jr at ya hoo dot com)

name=cryptodev-linux
version=git
release=3.13.3
source=()

build() {
git clone git://github.com/cryptodev-linux/cryptodev-linux.git
	cd $name
	export REPORT_KERNEL=${release}TS_SMP

	make
	make install PREFIX=$PKG MODLIB=$PKG/lib/modules/${release}TS_SMP INSTALL_MOD_DIR=kernel/extra MODSECKEY=/etc/ssl/keys/kernel.key MODPUBKEY=/etc/ssl/certs/kernel.crt

	make clean

	export REPORT_KERNEL=${release}TS

	make
	make install PREFIX=$PKG MODLIB=$PKG/lib/modules/${release}TS INSTALL_MOD_DIR=kernel/extra MODSECKEY=/etc/ssl/keys/kernel.key MODPUBKEY=/etc/ssl/certs/kernel.crt

	chmod 644 $PKG/usr/include/crypto/cryptodev.h
}
