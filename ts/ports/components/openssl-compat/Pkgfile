# Description: Secure Sockets Layer and Transport Layer Security tools
# URL:         http://www.openssl.org/
# Maintainer:  CRUX System Team, core-ports at crux dot nu

name=openssl-compat
pname=openssl
version=0.9.8x
release=1
source=(http://www.openssl.org/source/$pname-$version.tar.gz
	openssl-0.9.8x-fix_pod_syntax-1.patch)

build() {
    cd $pname-$version
    patch -Np1 -i ../openssl-0.9.8x-fix_pod_syntax-1.patch
    ./config --prefix=/usr/local --openssldir=/etc/ssl shared
    sed -i "s|-O3|$CFLAGS|" Makefile
    make -j1
    make INSTALL_PREFIX=$PKG install
    rm -rf $PKG/usr/local/{include,bin,man,lib/engines,lib/pkgconfig} $PKG/etc
    find $PKG -name \*.a -delete
    find $PKG -type l -delete
}
