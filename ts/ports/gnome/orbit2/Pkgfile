# Description: Code for an ORB written in C will spontaneously evolve here
# URL: http://www.labs.redhat.com/orbit/
# Maintainer: Matt Housh, jaeger at morpheus dot net
# Depends on: glib, libidl
# Group: gnome/platform

name=orbit2
version=2.14.19
release=1
source=(http://ftp.gnome.org/pub/GNOME/sources/ORBit2/2.14/ORBit2-$version.tar.bz2 \
	ORBit2-2.14.3-ref-leaks.patch
	ORBit2-allow-deprecated.patch
	ORBit2-make-j-safety.patch)

build() {
	export MAKEFLAGS="$MAKEFLAGS -j1"
	cd ORBit2-$version

	patch -p1 -i $SRC/ORBit2-2.14.3-ref-leaks.patch
	patch -p1 -i $SRC/ORBit2-allow-deprecated.patch
	patch -p1 -i $SRC/ORBit2-make-j-safety.patch

	./configure --prefix=/usr \
		--enable-purify \
		--enable-debug=no \
		--disable-gtk-doc \
		--disable-static \
		--enable-shared \

	make
	make DESTDIR=$PKG install
	rm -rf $PKG/usr/share/gtk-doc
}
