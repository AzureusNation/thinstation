# Description: A set of good-quality plugins for gstreamer under the LGPL.
# URL: http://gstreamer.freedesktop.org/modules/gst-plugins-good.html
# Maintainer: Danny Rawlins, monster dot romster at gmail dot com
# Packager: Matt Housh, jaeger at morpheus dot net
# Depends on: flac gst-plugins-base gtk hal libdv libshout libsoup libtheora speex taglib wavpack

name=gst-plugins-good
version=0.10.31
release=1
source=(http://gstreamer.freedesktop.org/src/$name/$name-$version.tar.xz)

build() {
	cd $name-$version

	# Patches for new kernels
	sed -i -e "/input:/d" sys/v4l2/gstv4l2bufferpool.c
	sed -i -e "/case V4L2_CID_HCENTER/d" -e "/case V4L2_CID_VCENTER/d" sys/v4l2/v4l2_calls.c

	./configure \
		--prefix=/usr \
		--mandir=/usr/man \
		--disable-debug \
		--disable-nls \
		--disable-dependency-tracking \
		--disable-valgrind \
		--disable-examples \
		--disable-oss \
                --disable-oss4 \
		--disable-esd \
                --enable-shared \
                --enable-shout2 \
                --enable-vpx \
                --enable-wavpack \
		--enable-shared \
		--disable-static

	make
	make DESTDIR=$PKG install
}
