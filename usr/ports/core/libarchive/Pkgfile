# Description: Library to create and read several archive formats
# URL:         http://www.libarchive.org/
# Maintainer:  CRUX System Team, core-ports at crux dot nu
# Depends on:  bzip2, xz, zlib, acl

name=libarchive
version=3.1.2
release=1
source=(http://www.libarchive.org/downloads/$name-$version.tar.gz
	libarchive-3.1.2-ignore-selinux.patch)

build() {
	cd $name-$version

	# Remove selinux xattr coming from chroot'd hosts filesystem
	patch -Np1 -i $SRC/libarchive-3.1.2-ignore-selinux.patch

	# We're passing --without-lzmadec, because we want to use xz for
	# LZMA support, not the obsolete lzmadec library.
	./configure --prefix=/usr --mandir=/usr/man \
	            --without-lzmadec

	make
	make DESTDIR=$PKG install
}
